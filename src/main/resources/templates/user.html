<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: head"></head>
<body>
<div th:replace="fragments/header :: header"></div>

<main class="container">
    <div class="user-card">
        <div class="user-header">
            <div class="user-avatar">üíª</div>
            <div class="user-info">
                <h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
                <p class="user-phone" th:text="${phoneNumber} ?: '–ù–æ–º–µ—Ä –Ω–µ —É–∫–∞–∑–∞–Ω'"></p>
            </div>
        </div>

        <div th:if="${phoneNumber == null}" class="alert alert-danger">
            –û—à–∏–±–∫–∞: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω.
        </div>
    </div>

    <div class="user-card">
        <h2>–ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <div class="table-container">
            <a href="/booking" class="btn btn-primary mb-3">+ –î–æ–±–∞–≤–∏—Ç—å –±—Ä–æ–Ω—å</a>
            <table class="table table-hover bookings-table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>–î–∞—Ç–∞</th>
                    <th>–í—Ä–µ–º—è</th>
                    <th>–¢–∏–ø –º–µ—Å—Ç–∞</th>
                    <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
                </thead>
                <tbody>
                <tr th:if="${bookings == null or bookings.isEmpty()}">
                    <td colspan="7" class="text-center py-4 text-muted">
                        –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
                    </td>
                </tr>

                <tr th:each="booking : ${bookings}" th:attr="data-booking-id=${booking.id}">
                    <td th:text="'#' + ${booking.id}"></td>
                    <td th:text="${#temporals.format(booking.date, 'dd.MM.yyyy')}"></td>
                    <td>
                        <span th:text="${#temporals.format(booking.startTime, 'HH:mm')} + '-' + ${#temporals.format(booking.endTime, 'HH:mm')}"></span>
                    </td>
                    <td th:text="${#strings.capitalize(booking.placeType.toLowerCase())}"></td>
                    <td th:text="${booking.price} + ' ‚ÇΩ'"></td>
                    <td>
                            <span th:switch="${booking.status.name()}">
                                <span th:case="'ACTIVE'" class="badge bg-success">–ê–∫—Ç–∏–≤–Ω–æ</span>
                                <span th:case="'CANCELLED'" class="badge bg-secondary">–û—Ç–º–µ–Ω–µ–Ω–æ</span>
                                <span th:case="'COMPLETED'" class="badge bg-secondary">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                            </span>
                    </td>
                    <td>
                        <button th:if="${booking.status.name() == 'ACTIVE'}"
                                class="btn btn-outline-danger btn-sm cancel-btn"
                                th:attr="data-booking-id=${booking.id}">
                            –û—Ç–º–µ–Ω–∏—Ç—å
                        </button>
                        <span th:if="${booking.status.name() == 'CANCELLED'}" class="text-muted">‚Äî</span>
                        <span th:if="${booking.status.name() == 'COMPLETED'}" class="text-muted">‚Äî</span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</main>

<div th:replace="~{fragments/footer :: footer}"></div>

<script>

</script>
</body>
</html>